import png,sys

digits=[
    [0x00,0x00,0x04,0x0A,0x11,0x11,0x11,0x11,0x11,0x0A,0x04,0x00,0x00,],# 48 (0x30) '0'
    [0x00,0x00,0x04,0x06,0x05,0x04,0x04,0x04,0x04,0x04,0x1F,0x00,0x00,],# 49 (0x31) '1'
    [0x00,0x00,0x0E,0x11,0x11,0x10,0x08,0x04,0x02,0x01,0x1F,0x00,0x00,],# 50 (0x32) '2'
    [0x00,0x00,0x1F,0x10,0x08,0x04,0x0E,0x10,0x10,0x11,0x0E,0x00,0x00,],# 51 (0x33) '3'
    [0x00,0x00,0x08,0x08,0x0C,0x0A,0x0A,0x09,0x1F,0x08,0x08,0x00,0x00,],# 52 (0x34) '4'
    [0x00,0x00,0x1F,0x01,0x01,0x0D,0x13,0x10,0x10,0x11,0x0E,0x00,0x00,],# 53 (0x35) '5'
    [0x00,0x00,0x0E,0x11,0x01,0x01,0x0F,0x11,0x11,0x11,0x0E,0x00,0x00,],# 54 (0x36) '6'
    [0x00,0x00,0x1F,0x10,0x08,0x08,0x04,0x04,0x02,0x02,0x02,0x00,0x00,],# 55 (0x37) '7'
    [0x00,0x00,0x0E,0x11,0x11,0x11,0x0E,0x11,0x11,0x11,0x0E,0x00,0x00,],# 56 (0x38) '8'
    [0x00,0x00,0x0E,0x11,0x11,0x11,0x1E,0x10,0x10,0x11,0x0E,0x00,0x00,],# 57 (0x39) '9'
]

def draw_digit(rows,bx,by,d):
    for y in range(13):
        for x in range(6):
            if digits[d][y]&(1<<x):
               rows[by+y][bx+x]=(0,0,0,255) 

n=int(sys.argv[1])

# create bitmap
rows=[]
for y in range(16):
    rows.append([])
    for x in range(n*16):
        rows[-1].append((255,255,255,0))

# draw digits
for i in range(int(sys.argv[1])):
    draw_digit(rows,i*16+1,2,i/10)
    draw_digit(rows,i*16+9,2,i%10)

# dilate
for y in range(1,len(rows)-1):
    for x in range(1,len(rows[y])-1):
        if rows[y][x]==(0,0,0,255):
            for dx,dy in [(-1,-1),(0,-1),(1,-1),
                          (-1,0),(1,0),
                          (-1,1),(0,1),(1,1)]:
                if rows[y+dy][x+dx]==(255,255,255,0):
                    rows[y+dy][x+dx]=(255,255,255,255)

png_width=len(rows[0])
png_height=len(rows)
    
# flatten pixels
for y in range(len(rows)):
    tmp=[]
    for x in range(len(rows[y])):
        for v in rows[y][x]:
            tmp.append(v)
            
    rows[y]=tmp

# save
f=open("../Resources/digits.png","wb")

w=png.Writer(width=png_width,height=png_height,alpha=True)
w.write(f,rows)

f.close()
f=None
